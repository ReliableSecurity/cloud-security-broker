# Руководство по внесению вклада в CASB Security System

Спасибо за интерес к участию в развитии CASB Security System! Этот документ содержит руководящие принципы для разработчиков.

## Как внести вклад

### Сообщения об ошибках

1. Убедитесь, что ошибка еще не была сообщена, проверив [Issues](https://github.com/yourusername/casb-security-system/issues)
2. Создайте новый Issue с подробным описанием:
   - Версия системы
   - Операционная система
   - Шаги для воспроизведения
   - Ожидаемое поведение
   - Фактическое поведение
   - Логи (если применимо)

### Предложения новых функций

1. Сначала обсудите идею в [Discussions](https://github.com/yourusername/casb-security-system/discussions)
2. Создайте Issue с описанием предлагаемой функции
3. Дождитесь одобрения от мейнтейнеров перед началом разработки

### Pull Requests

1. Сделайте форк репозитория
2. Создайте ветку для вашей функции: `git checkout -b feature/amazing-feature`
3. Внесите изменения
4. Добавьте тесты для новой функциональности
5. Убедитесь, что все тесты проходят: `pytest`
6. Проверьте код линтерами: `flake8 . && black . --check`
7. Обновите документацию, если необходимо
8. Зафиксируйте изменения: `git commit -m 'Add amazing feature'`
9. Отправьте ветку: `git push origin feature/amazing-feature`
10. Откройте Pull Request

## Стандарты кодирования

### Python код

- Следуйте [PEP 8](https://pep8.org/)
- Используйте `black` для форматирования кода
- Используйте `flake8` для проверки качества кода
- Добавляйте docstrings для всех функций и классов
- Используйте типизацию где это возможно

### Комментарии и документация

- Код должен быть самодокументируемым
- Комментарии на русском языке для пользовательских функций
- Docstrings на русском языке
- Обновляйте README.md при добавлении новых функций

### Структура коммитов

Используйте следующий формат для сообщений коммитов:

```
<тип>(<область>): <описание>

<подробное описание (опционально)>

<footer (опционально)>
```

Типы коммитов:
- `feat`: новая функция
- `fix`: исправление ошибки
- `docs`: изменения в документации
- `style`: форматирование, отсутствующие точки с запятой и т.д.
- `refactor`: рефакторинг кода
- `test`: добавление тестов
- `chore`: обновление задач сборки, настройки и т.д.

Примеры:
```
feat(auth): добавить поддержку LDAP аутентификации
fix(dlp): исправить ошибку сканирования больших файлов
docs(api): обновить документацию REST API
```

## Настройка среды разработки

### Требования

- Python 3.8+
- Git
- Docker (для тестирования)

### Настройка

1. Клонируйте репозиторий:
```bash
git clone https://github.com/yourusername/casb-security-system.git
cd casb-security-system
```

2. Создайте виртуальное окружение:
```bash
python3 -m venv venv
source venv/bin/activate  # Linux/Mac
# или
venv\Scripts\activate  # Windows
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
pip install -r requirements-dev.txt  # зависимости для разработки
```

4. Настройте конфигурацию:
```bash
cp config.yaml.example config.yaml
# Отредактируйте config.yaml под ваши нужды
```

5. Инициализируйте базу данных:
```bash
python -c "from core.casb import CASBCore; CASBCore('data/casb.db')"
```

6. Запустите тесты:
```bash
pytest
```

7. Запустите приложение:
```bash
python app.py
```

### Инструменты разработки

#### Линтеры и форматирование

```bash
# Форматирование кода
black .

# Проверка качества кода
flake8 .

# Типизация
mypy .

# Проверка безопасности
bandit -r .
safety check
```

#### Pre-commit hooks

Установите pre-commit hooks:

```bash
pip install pre-commit
pre-commit install
```

#### Тестирование

```bash
# Запуск всех тестов
pytest

# Запуск с покрытием кода
pytest --cov=. --cov-report=html

# Запуск конкретных тестов
pytest tests/test_auth.py

# Запуск в режиме отладки
pytest -v -s
```

### Docker разработка

```bash
# Сборка образа
docker build -t casb-security:dev .

# Запуск в режиме разработки
docker-compose -f docker-compose.dev.yml up

# Запуск только основных сервисов
docker-compose up casb-app redis postgres
```

## Структура проекта

```
casb-security-system/
├── api/                    # REST API
├── auth/                   # Аутентификация и авторизация
├── core/                   # Основная логика CASB
├── dlp/                    # Защита от утечки данных
├── monitoring/             # Мониторинг облачных сервисов
├── policies/               # Политики безопасности
├── web/                    # Веб-интерфейс
├── scripts/                # Скрипты развертывания
├── docker/                 # Docker конфигурации
├── monitoring/             # Конфигурации мониторинга
├── tests/                  # Тесты
└── docs/                   # Документация
```

## Рекомендации по безопасности

- Никогда не коммитьте секретные ключи или пароли
- Используйте переменные окружения для чувствительных данных
- Проверяйте код на уязвимости перед коммитом
- Следуйте принципам безопасной разработки

## Вопросы?

Если у вас есть вопросы, создайте Issue или обратитесь к мейнтейнерам проекта.

Спасибо за ваш вклад в развитие безопасности облачных технологий!
